(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["thirdPage-short-video-short-video"],{2757:function(t,i,e){"use strict";e("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("cb29"),e("caad"),e("2532");var a={name:"ThirdPageShortVideo",data:function(){return{containerHeight:0,current:0,videoSrc:["http://vjs.zencdn.net/v/oceans.mp4","http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"],h5FirstPlay:!0,loadingFirst:!0,swiperList:[{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。基于图鸟UI开发的第三方插件，图鸟加油，可以的。基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""},{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""},{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""},{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""},{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""}],loadingVideoFlag:[]}},computed:{listLength:function(){return this.swiperList.length}},onLoad:function(){this.getContainerHeight(),this.initData()},onReady:function(){var t=this;this.$nextTick((function(){t.loadVideo()}))},methods:{clickLike:function(t){var i=this.swiperList[t];i.like.flag=!i.like.flag,this.$set(this.swiperList,t,i)},clickStar:function(t){var i=this.swiperList[t];i.star.flag=!i.star.flag,this.$set(this.swiperList,t,i)},getContainerHeight:function(){var t=uni.getSystemInfoSync();this.containerHeight=t.safeArea.height-this.vuex_custom_bar_height+t.statusBarHeight},initData:function(){this.loadingVideoFlag=Array(this.listLength).fill(!1)},loadVideo:function(){var t=this.current,i=t-1<0?this.listLength-1:t-1,e=t+1>this.listLength-1?0:t+1,a=this.swiperList[t],s=this.swiperList[i],n=this.swiperList[e];a.loading||(a.src=this.videoSrc[this.$tn.number.randomInt(0,1)],a.loading=!0,this.$set(this.swiperList,t,a)),s.loading||(s.src=this.videoSrc[this.$tn.number.randomInt(0,1)],s.loading=!0,this.$set(this.swiperList,i,s)),n.loading||(n.src=this.videoSrc[this.$tn.number.randomInt(0,1)],n.loading=!0,this.$set(this.swiperList,e,n));for(var o=0;o<this.listLength;o++)if(![t,i,e].includes(o)){var r=this.swiperList[o];r.loading=!1,r.src="",this.$set(this.swiperList,o,r),this.loadingVideoFlag[o]=!1}this.playCurrentVideo()},playCurrentVideo:function(){var t=this,i=this.current;setTimeout((function(){t.loadingVideoFlag[i]||t.$tn.message.toast("播放失败，请看其他视频")}),800);for(var e=0;e<this.listLength;e++){var a=uni.createVideoContext("video-".concat(e),this);e===i?this.h5FirstPlay||a.play():a.pause()}},handleSwiperChange:function(t){this.current=t.current,this.loadVideo(),this.h5FirstPlay&&(this.h5FirstPlay=!1),this.loadingFirst&&2===t.current&&(this.loadingFirst=!1)},handleVideoLoadedmetadata:function(t,i){if(!this.loadingVideoFlag[i]&&this.current===i&&(console.log("loadmetadata"),!this.h5FirstPlay)){var e=uni.createVideoContext("video-".concat(i),this);e.play()}this.loadingVideoFlag[i]=!0},handleVideoError:function(t,i){this.loadingVideoFlag[i]=!1,i===this.current&&this.$tn.message.toast("播放失败，请看其他视频")}}};i.default=a},"424a":function(t,i,e){var a=e("7479");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("22968e52",a,!0,{sourceMap:!1,shadowMode:!1})},"526f":function(t,i,e){"use strict";e.r(i);var a=e("a705"),s=e("f7c4");for(var n in s)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(n);e("6760");var o=e("f0c5"),r=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"09bf7044",null,!1,a["a"],void 0);i["default"]=r.exports},6760:function(t,i,e){"use strict";var a=e("424a"),s=e.n(a);s.a},7479:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为Tuniao UI的集成样式文件，为scss预处理器，其中包含了一些"tn-"开头的自定义变量\r\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\r\n * Tuniao UI自定义的css类名和scss变量，均以"tn-"开头，不会造成冲突，请放心使用 \r\n */.swiper[data-v-09bf7044]{width:100%;height:100%;display:block}.swiper__item[data-v-09bf7044]{background-color:#000}.swiper__item .item__container[data-v-09bf7044]{position:absolute;width:100%;height:100%}.swiper__item .item__video[data-v-09bf7044]{width:100%;height:100%}.swiper__item .item__content[data-v-09bf7044]{width:70%;color:#fff;position:absolute;bottom:%?30?%;left:%?30?%;z-index:1;transition-duration:0s}.swiper__item .item__content .author-name[data-v-09bf7044]{font-size:%?38?%;font-weight:700;margin-bottom:%?10?%}.swiper__item .item__content .desc[data-v-09bf7044]{width:100%;line-height:1.3em;white-space:normal!important;text-overflow:ellipsis;word-wrap:break-word;-webkit-line-clamp:5}.swiper__item .item__operation[data-v-09bf7044]{color:#fff;position:absolute;right:%?30?%;bottom:%?120?%;display:flex;flex-direction:column;align-items:center;z-index:1;transition-duration:0s}.swiper__item .item__operation .avatar[data-v-09bf7044]{width:%?80?%;height:%?80?%;border-radius:50%;overflow:hidden;border:%?6?% solid #fff;margin-bottom:%?20?%}.swiper__item .item__operation .avatar .image[data-v-09bf7044]{width:100%;height:100%}.swiper__item .item__operation .icon[data-v-09bf7044]{font-size:%?60?%}.swiper__item .item__operation .icon__select[data-v-09bf7044]{color:#ffca28;-webkit-animation:select-keyframes-data-v-09bf7044 .25s cubic-bezier(.175,.885,.32,1.275);animation:select-keyframes-data-v-09bf7044 .25s cubic-bezier(.175,.885,.32,1.275)}.swiper__item .item__operation .options[data-v-09bf7044]{display:flex;flex-direction:column;align-items:center;margin-bottom:%?10?%}.swiper__item .item__operation .options .text[data-v-09bf7044]{font-size:%?24?%}@-webkit-keyframes select-keyframes-data-v-09bf7044{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes select-keyframes-data-v-09bf7044{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}',""]),t.exports=i},a705:function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}));var a={tnNavBar:e("75e2").default,tnCustomSwiper:e("264f").default,tnCustomSwiperItem:e("377c").default},s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"third-page-short-video tn-safe-area-inset-bottom"},[e("tn-nav-bar",{attrs:{fixed:!0}},[t._v("短视频")]),e("v-uni-view",{style:{paddingTop:t.vuex_custom_bar_height+"px"}},[e("v-uni-view",{staticClass:"container",style:{height:t.containerHeight+"px"}},[e("tn-custom-swiper",{staticClass:"swiper",attrs:{current:t.current,duration:250,circular:!t.loadingFirst,vertical:!0},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.handleSwiperChange.apply(void 0,arguments)}}},[t._l(t.swiperList,(function(i,a){return[e("tn-custom-swiper-item",{key:a+"_0",staticClass:"swiper__item"},[e("v-uni-view",{staticClass:"item__container"},[i.loading?e("v-uni-video",{staticClass:"item__video",attrs:{id:"video-"+a,src:i.src,objectFit:"cover",autoplay:!1,loop:!0,controls:!1,"show-progress":!1,"show-fullscreen-btn":!1,"show-center-play-btn":!0,"show-loading":!1},on:{error:function(i){arguments[0]=i=t.$handleEvent(i),t.handleVideoError(i,a)},loadedmetadata:function(i){arguments[0]=i=t.$handleEvent(i),t.handleVideoLoadedmetadata(i,a)}}}):t._e(),t.current===a?[e("v-uni-view",{staticClass:"item__content"},[e("v-uni-view",{staticClass:"author-name"},[t._v("@"+t._s(i.author.name))]),e("v-uni-view",{staticClass:"desc"},[t._v(t._s(i.desc))])],1),e("v-uni-view",{staticClass:"item__operation"},[e("v-uni-view",{staticClass:"avatar"},[e("v-uni-image",{staticClass:"image",attrs:{src:i.author.avatar}})],1),e("v-uni-view",{staticClass:"options like",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickLike(a)}}},[e("v-uni-view",{staticClass:"icon",class:[i.like.flag?"icon__select tn-icon-like-fill":"tn-icon-like"]}),e("v-uni-view",{staticClass:"text"},[t._v(t._s(i.like.count))])],1),e("v-uni-view",{staticClass:"options message"},[e("v-uni-view",{staticClass:"icon tn-icon-comment"}),e("v-uni-view",{staticClass:"text"},[t._v(t._s(i.message))])],1),e("v-uni-view",{staticClass:"options star",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickStar(a)}}},[e("v-uni-view",{staticClass:"icon",class:[i.star.flag?"icon__select tn-icon-star-fill":"tn-icon-star"]}),e("v-uni-view",{staticClass:"text"},[t._v(t._s(i.star.count))])],1),e("v-uni-view",{staticClass:"options share"},[e("v-uni-view",{staticClass:"icon tn-icon-share-triangle"}),e("v-uni-view",{staticClass:"text"},[t._v(t._s(i.share))])],1)],1)]:t._e()],2)],1)]}))],2)],1)],1)],1)},n=[]},cb29:function(t,i,e){var a=e("23e7"),s=e("81d5"),n=e("44d2");a({target:"Array",proto:!0},{fill:s}),n("fill")},f7c4:function(t,i,e){"use strict";e.r(i);var a=e("2757"),s=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a}}]);