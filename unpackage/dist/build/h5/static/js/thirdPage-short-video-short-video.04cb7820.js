(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["thirdPage-short-video-short-video"],{2757:function(t,i,a){"use strict";(function(t){a("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,a("cb29"),a("caad"),a("2532");var e={name:"ThirdPageShortVideo",data:function(){return{containerHeight:0,current:0,videoSrc:["http://vjs.zencdn.net/v/oceans.mp4","http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"],h5FirstPlay:!0,loadingFirst:!0,swiperList:[{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。基于图鸟UI开发的第三方插件，图鸟加油，可以的。基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""},{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""},{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""},{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""},{author:{name:"小泡泡",avatar:"https://tnuiimage.tnkjapp.com/avatar/xiaomai2.jpg"},desc:"基于图鸟UI开发的第三方插件，图鸟加油，可以的。",like:{flag:!0,count:100},message:800,star:{flag:!1,count:200},share:300,loading:!1,src:""}],loadingVideoFlag:[]}},computed:{listLength:function(){return this.swiperList.length}},onLoad:function(){this.getContainerHeight(),this.initData()},onReady:function(){var t=this;this.$nextTick((function(){t.loadVideo()}))},methods:{clickLike:function(t){var i=this.swiperList[t];i.like.flag=!i.like.flag,this.$set(this.swiperList,t,i)},clickStar:function(t){var i=this.swiperList[t];i.star.flag=!i.star.flag,this.$set(this.swiperList,t,i)},getContainerHeight:function(){var t=uni.getSystemInfoSync();this.containerHeight=t.safeArea.height-this.vuex_custom_bar_height+t.statusBarHeight},initData:function(){this.loadingVideoFlag=Array(this.listLength).fill(!1)},loadVideo:function(){var t=this.current,i=t-1<0?this.listLength-1:t-1,a=t+1>this.listLength-1?0:t+1,e=this.swiperList[t],s=this.swiperList[i],n=this.swiperList[a];e.loading||(e.src=this.videoSrc[this.$tn.number.randomInt(0,1)],e.loading=!0,this.$set(this.swiperList,t,e)),s.loading||(s.src=this.videoSrc[this.$tn.number.randomInt(0,1)],s.loading=!0,this.$set(this.swiperList,i,s)),n.loading||(n.src=this.videoSrc[this.$tn.number.randomInt(0,1)],n.loading=!0,this.$set(this.swiperList,a,n));for(var o=0;o<this.listLength;o++)if(![t,i,a].includes(o)){var r=this.swiperList[o];r.loading=!1,r.src="",this.$set(this.swiperList,o,r),this.loadingVideoFlag[o]=!1}this.playCurrentVideo()},playCurrentVideo:function(){var t=this,i=this.current;setTimeout((function(){t.loadingVideoFlag[i]||t.$tn.message.toast("播放失败，请看其他视频")}),800);for(var a=0;a<this.listLength;a++){var e=uni.createVideoContext("video-".concat(a),this);a===i?this.h5FirstPlay||e.play():e.pause()}},handleSwiperChange:function(t){this.current=t.current,this.loadVideo(),this.h5FirstPlay&&(this.h5FirstPlay=!1),this.loadingFirst&&2===t.current&&(this.loadingFirst=!1)},handleVideoLoadedmetadata:function(i,a){if(!this.loadingVideoFlag[a]&&this.current===a&&(t("log","loadmetadata"," at thirdPage/short-video/short-video.vue:326"),!this.h5FirstPlay)){var e=uni.createVideoContext("video-".concat(a),this);e.play()}this.loadingVideoFlag[a]=!0},handleVideoError:function(t,i){this.loadingVideoFlag[i]=!1,i===this.current&&this.$tn.message.toast("播放失败，请看其他视频")}}};i.default=e}).call(this,a("0de9")["log"])},"424a":function(t,i,a){var e=a("7479");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=a("4f06").default;s("1dcfa8fa",e,!0,{sourceMap:!1,shadowMode:!1})},"526f":function(t,i,a){"use strict";a.r(i);var e=a("a705"),s=a("f7c4");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(i,t,(function(){return s[t]}))}(n);a("6760");var o=a("f0c5"),r=Object(o["a"])(s["default"],e["b"],e["c"],!1,null,"09bf7044",null,!1,e["a"],void 0);i["default"]=r.exports},6760:function(t,i,a){"use strict";var e=a("424a"),s=a.n(e);s.a},7479:function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为Tuniao UI的集成样式文件，为scss预处理器，其中包含了一些"tn-"开头的自定义变量\r\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\r\n * Tuniao UI自定义的css类名和scss变量，均以"tn-"开头，不会造成冲突，请放心使用 \r\n */.swiper[data-v-09bf7044]{width:100%;height:100%;display:block}.swiper__item[data-v-09bf7044]{background-color:#000}.swiper__item .item__container[data-v-09bf7044]{position:absolute;width:100%;height:100%}.swiper__item .item__video[data-v-09bf7044]{width:100%;height:100%}.swiper__item .item__content[data-v-09bf7044]{width:70%;color:#fff;position:absolute;bottom:%?30?%;left:%?30?%;z-index:1;transition-duration:0s}.swiper__item .item__content .author-name[data-v-09bf7044]{font-size:%?38?%;font-weight:700;margin-bottom:%?10?%}.swiper__item .item__content .desc[data-v-09bf7044]{width:100%;line-height:1.3em;white-space:normal!important;text-overflow:ellipsis;word-wrap:break-word;-webkit-line-clamp:5}.swiper__item .item__operation[data-v-09bf7044]{color:#fff;position:absolute;right:%?30?%;bottom:%?120?%;display:flex;flex-direction:column;align-items:center;z-index:1;transition-duration:0s}.swiper__item .item__operation .avatar[data-v-09bf7044]{width:%?80?%;height:%?80?%;border-radius:50%;overflow:hidden;border:%?6?% solid #fff;margin-bottom:%?20?%}.swiper__item .item__operation .avatar .image[data-v-09bf7044]{width:100%;height:100%}.swiper__item .item__operation .icon[data-v-09bf7044]{font-size:%?60?%}.swiper__item .item__operation .icon__select[data-v-09bf7044]{color:#ffca28;-webkit-animation:select-keyframes-data-v-09bf7044 .25s cubic-bezier(.175,.885,.32,1.275);animation:select-keyframes-data-v-09bf7044 .25s cubic-bezier(.175,.885,.32,1.275)}.swiper__item .item__operation .options[data-v-09bf7044]{display:flex;flex-direction:column;align-items:center;margin-bottom:%?10?%}.swiper__item .item__operation .options .text[data-v-09bf7044]{font-size:%?24?%}@-webkit-keyframes select-keyframes-data-v-09bf7044{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes select-keyframes-data-v-09bf7044{0%{-webkit-transform:scale(0);transform:scale(0)}100%{-webkit-transform:scale(1);transform:scale(1)}}',""]),t.exports=i},a705:function(t,i,a){"use strict";a.d(i,"b",(function(){return s})),a.d(i,"c",(function(){return n})),a.d(i,"a",(function(){return e}));var e={tnNavBar:a("75e2").default,tnCustomSwiper:a("264f").default,tnCustomSwiperItem:a("377c").default},s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"third-page-short-video tn-safe-area-inset-bottom"},[a("tn-nav-bar",{attrs:{fixed:!0}},[t._v("短视频")]),a("v-uni-view",{style:{paddingTop:t.vuex_custom_bar_height+"px"}},[a("v-uni-view",{staticClass:"container",style:{height:t.containerHeight+"px"}},[a("tn-custom-swiper",{staticClass:"swiper",attrs:{current:t.current,duration:250,circular:!t.loadingFirst,vertical:!0},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.handleSwiperChange.apply(void 0,arguments)}}},[t._l(t.swiperList,(function(i,e){return[a("tn-custom-swiper-item",{key:e+"_0",staticClass:"swiper__item"},[a("v-uni-view",{staticClass:"item__container"},[i.loading?a("v-uni-video",{staticClass:"item__video",attrs:{id:"video-"+e,src:i.src,objectFit:"cover",autoplay:!1,loop:!0,controls:!1,"show-progress":!1,"show-fullscreen-btn":!1,"show-center-play-btn":!0,"show-loading":!1},on:{error:function(i){arguments[0]=i=t.$handleEvent(i),t.handleVideoError(i,e)},loadedmetadata:function(i){arguments[0]=i=t.$handleEvent(i),t.handleVideoLoadedmetadata(i,e)}}}):t._e(),t.current===e?[a("v-uni-view",{staticClass:"item__content"},[a("v-uni-view",{staticClass:"author-name"},[t._v("@"+t._s(i.author.name))]),a("v-uni-view",{staticClass:"desc"},[t._v(t._s(i.desc))])],1),a("v-uni-view",{staticClass:"item__operation"},[a("v-uni-view",{staticClass:"avatar"},[a("v-uni-image",{staticClass:"image",attrs:{src:i.author.avatar}})],1),a("v-uni-view",{staticClass:"options like",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickLike(e)}}},[a("v-uni-view",{staticClass:"icon",class:[i.like.flag?"icon__select tn-icon-like-fill":"tn-icon-like"]}),a("v-uni-view",{staticClass:"text"},[t._v(t._s(i.like.count))])],1),a("v-uni-view",{staticClass:"options message"},[a("v-uni-view",{staticClass:"icon tn-icon-comment"}),a("v-uni-view",{staticClass:"text"},[t._v(t._s(i.message))])],1),a("v-uni-view",{staticClass:"options star",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickStar(e)}}},[a("v-uni-view",{staticClass:"icon",class:[i.star.flag?"icon__select tn-icon-star-fill":"tn-icon-star"]}),a("v-uni-view",{staticClass:"text"},[t._v(t._s(i.star.count))])],1),a("v-uni-view",{staticClass:"options share"},[a("v-uni-view",{staticClass:"icon tn-icon-share-triangle"}),a("v-uni-view",{staticClass:"text"},[t._v(t._s(i.share))])],1)],1)]:t._e()],2)],1)]}))],2)],1)],1)],1)},n=[]},cb29:function(t,i,a){var e=a("23e7"),s=a("81d5"),n=a("44d2");e({target:"Array",proto:!0},{fill:s}),n("fill")},f7c4:function(t,i,a){"use strict";a.r(i);var e=a("2757"),s=a.n(e);for(var n in e)["default"].indexOf(n)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(n);i["default"]=s.a}}]);